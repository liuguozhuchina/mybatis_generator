<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.huayu.entity.personal.UserDao">
    <resultMap id="user" type="com.huayu.entity.personal.User">
        <id column="id" property="id"/>
        <result column="user_name" property="userName"/>
        <result column="nick_name" property="nickName"/>
        <result column="password" property="password"/>
        <result column="team_id" property="teamId"/>
        <result column="ip" property="ip"/>
        <result column="login_time" property="loginTime"/>
        <result column="signature" property="signature"/>
        <result column="province" property="province"/>
        <result column="city" property="city"/>
        <result column="county" property="county"/>
        <result column="address" property="address"/>
        <result column="zip_code" property="zipCode"/>
        <result column="real_name" property="realName"/>
        <result column="phone_number" property="phoneNumber"/>
        <result column="email" property="email"/>
        <result column="isEmail_verified" property="isEmailVerified"/>
        <result column="qq" property="qq"/>
        <result column="pin_number" property="pinNumber"/>
        <result column="money" property="money"/>
        <result column="consumption_amount" property="consumptionAmount"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <!-- Select SQL -->
    <sql id="selector">
        SELECT
        <if test="fields != null and fields!='' ">
        ${fields}
        </if>
        <if test="fields == null or fields=='' ">
        id,user_name,nick_name,password,team_id,ip,login_time,signature,province,city,county,address,zip_code,real_name,phone_number,email,isEmail_verified,qq,pin_number,money,consumption_amount,create_time,update_time
        </if>
        FROM user
    </sql>

    <!-- Where SQL -->
    <sql id="Listwhere">
     <where>
        <if test="id!= null ">
            AND id= #{id}
        </if>
        <if test="userName!= null and userName!='' ">
            AND user_name= #{userName}
        </if>
        <if test="nickName!= null and nickName!='' ">
            AND nick_name= #{nickName}
        </if>
        <if test="password!= null and password!='' ">
            AND password= #{password}
        </if>
        <if test="teamId!= null ">
            AND team_id= #{teamId}
        </if>
        <if test="ip!= null and ip!='' ">
            AND ip= #{ip}
        </if>
        <if test="loginTime!= null ">
            AND login_time= #{loginTime}
        </if>
        <if test="signature!= null and signature!='' ">
            AND signature= #{signature}
        </if>
        <if test="province!= null and province!='' ">
            AND province= #{province}
        </if>
        <if test="city!= null and city!='' ">
            AND city= #{city}
        </if>
        <if test="county!= null and county!='' ">
            AND county= #{county}
        </if>
        <if test="address!= null and address!='' ">
            AND address= #{address}
        </if>
        <if test="zipCode!= null and zipCode!='' ">
            AND zip_code= #{zipCode}
        </if>
        <if test="realName!= null and realName!='' ">
            AND real_name= #{realName}
        </if>
        <if test="phoneNumber!= null and phoneNumber!='' ">
            AND phone_number= #{phoneNumber}
        </if>
        <if test="email!= null and email!='' ">
            AND email= #{email}
        </if>
        <if test="isEmailVerified!= null ">
            AND isEmail_verified= #{isEmailVerified}
        </if>
        <if test="qq!= null and qq!='' ">
            AND qq= #{qq}
        </if>
        <if test="pinNumber!= null and pinNumber!='' ">
            AND pin_number= #{pinNumber}
        </if>
        <if test="money!= null ">
            AND money= #{money}
        </if>
        <if test="consumptionAmount!= null ">
            AND consumption_amount= #{consumptionAmount}
        </if>
        <if test="createTime!= null ">
            AND create_time= #{createTime}
        </if>
        <if test="updateTime!= null ">
            AND update_time= #{updateTime}
        </if>
     </where>
    </sql>

    <!-- Order SQL -->
    <sql id="Listorder">
        <if test="orderFields != null and orderFields.size >0">
            order by
            <foreach collection="orderFields" separator="," item="orderField">
            ${orderField.fieldName} ${orderField.order}
            </foreach>
        </if>
    </sql>

    <!-- Page limit SQL -->
    <sql id="ListLimit">
        <if test="startRow >=0">
         limit #{startRow},#{pageSize}
        </if>
    </sql>

    <!-- 添加 -->
    <insert id="addUser" parameterType="com.huayu.entity.personal.User">
        INSERT INTO  user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id!= null ">
             id,
            </if>
            <if test="userName!= null and userName!='' ">
             user_name,
            </if>
            <if test="nickName!= null and nickName!='' ">
             nick_name,
            </if>
            <if test="password!= null and password!='' ">
             password,
            </if>
            <if test="teamId!= null ">
             team_id,
            </if>
            <if test="ip!= null and ip!='' ">
             ip,
            </if>
            <if test="loginTime!= null ">
             login_time,
            </if>
            <if test="signature!= null and signature!='' ">
             signature,
            </if>
            <if test="province!= null and province!='' ">
             province,
            </if>
            <if test="city!= null and city!='' ">
             city,
            </if>
            <if test="county!= null and county!='' ">
             county,
            </if>
            <if test="address!= null and address!='' ">
             address,
            </if>
            <if test="zipCode!= null and zipCode!='' ">
             zip_code,
            </if>
            <if test="realName!= null and realName!='' ">
             real_name,
            </if>
            <if test="phoneNumber!= null and phoneNumber!='' ">
             phone_number,
            </if>
            <if test="email!= null and email!='' ">
             email,
            </if>
            <if test="isEmailVerified!= null ">
             isEmail_verified,
            </if>
            <if test="qq!= null and qq!='' ">
             qq,
            </if>
            <if test="pinNumber!= null and pinNumber!='' ">
             pin_number,
            </if>
            <if test="money!= null ">
             money,
            </if>
            <if test="consumptionAmount!= null ">
             consumption_amount,
            </if>
            <if test="createTime!= null ">
             create_time,
            </if>
            <if test="updateTime!= null ">
             update_time,
            </if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            <if test="id!= null ">
              #{id},
            </if>
            <if test="userName!= null and userName!='' ">
              #{userName},
            </if>
            <if test="nickName!= null and nickName!='' ">
              #{nickName},
            </if>
            <if test="password!= null and password!='' ">
              #{password},
            </if>
            <if test="teamId!= null ">
              #{teamId},
            </if>
            <if test="ip!= null and ip!='' ">
              #{ip},
            </if>
            <if test="loginTime!= null ">
              #{loginTime},
            </if>
            <if test="signature!= null and signature!='' ">
              #{signature},
            </if>
            <if test="province!= null and province!='' ">
              #{province},
            </if>
            <if test="city!= null and city!='' ">
              #{city},
            </if>
            <if test="county!= null and county!='' ">
              #{county},
            </if>
            <if test="address!= null and address!='' ">
              #{address},
            </if>
            <if test="zipCode!= null and zipCode!='' ">
              #{zipCode},
            </if>
            <if test="realName!= null and realName!='' ">
              #{realName},
            </if>
            <if test="phoneNumber!= null and phoneNumber!='' ">
              #{phoneNumber},
            </if>
            <if test="email!= null and email!='' ">
              #{email},
            </if>
            <if test="isEmailVerified!= null ">
              #{isEmailVerified},
            </if>
            <if test="qq!= null and qq!='' ">
              #{qq},
            </if>
            <if test="pinNumber!= null and pinNumber!='' ">
              #{pinNumber},
            </if>
            <if test="money!= null ">
              #{money},
            </if>
            <if test="consumptionAmount!= null ">
              #{consumptionAmount},
            </if>
            <if test="createTime!= null ">
              #{createTime},
            </if>
            <if test="updateTime!= null ">
              #{updateTime},
            </if>
        </trim>
    </insert>

    <!-- 批量添加 -->
    <insert id="addUsers" parameterType="java.util.List">
        INSERT INTO  user(id,user_name,nick_name,password,team_id,ip,login_time,signature,province,city,county,address,zip_code,real_name,phone_number,email,isEmail_verified,qq,pin_number,money,consumption_amount,create_time,update_time)
        VALUES
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.id},#{item.userName},#{item.nickName},#{item.password},#{item.teamId},#{item.ip},#{item.loginTime},#{item.signature},#{item.province},#{item.city},#{item.county},#{item.address},#{item.zipCode},#{item.realName},#{item.phoneNumber},#{item.email},#{item.isEmailVerified},#{item.qq},#{item.pinNumber},#{item.money},#{item.consumptionAmount},#{item.createTime},#{item.updateTime})
        </foreach>
    </insert>

    <!-- 根据主键删除 -->
    <delete id="deleteByKey" parameterType="long">
        DELETE FROM  user
        WHERE   id=#{id}
    </delete>

    <!-- 根据主键批量删除 -->
    <delete id="deleteByKeys">
        DELETE FROM  user
        WHERE    id in
        <foreach collection="list" separator="," item="id" open="(" close=")">
        #{id}
        </foreach>
    </delete>

    <!-- 根据条件删除 -->
    <delete id="deleteByQuery" parameterType="com.huayu.entity.personal.User">
        DELETE FROM  user
        <include refid="Listwhere" />
    </delete>

    <!-- 根据条件删除 -->
    <delete id="deleteByMap" parameterType="map">
        DELETE FROM  user
        <include refid="Listwhere" />
    </delete>

       <!-- 根据主键更新 -->
    <update id="updateUserByKey" parameterType="com.huayu.entity.personal.User">
        UPDATE user
        <set>
            <trim suffixOverrides=",">
                <if test="id!= null ">
                id= #{id},
                </if>
                <if test="userName!= null and userName!='' ">
                user_name= #{userName},
                </if>
                <if test="nickName!= null and nickName!='' ">
                nick_name= #{nickName},
                </if>
                <if test="password!= null and password!='' ">
                password= #{password},
                </if>
                <if test="teamId!= null ">
                team_id= #{teamId},
                </if>
                <if test="ip!= null and ip!='' ">
                ip= #{ip},
                </if>
                <if test="loginTime!= null ">
                login_time= #{loginTime},
                </if>
                <if test="signature!= null and signature!='' ">
                signature= #{signature},
                </if>
                <if test="province!= null and province!='' ">
                province= #{province},
                </if>
                <if test="city!= null and city!='' ">
                city= #{city},
                </if>
                <if test="county!= null and county!='' ">
                county= #{county},
                </if>
                <if test="address!= null and address!='' ">
                address= #{address},
                </if>
                <if test="zipCode!= null and zipCode!='' ">
                zip_code= #{zipCode},
                </if>
                <if test="realName!= null and realName!='' ">
                real_name= #{realName},
                </if>
                <if test="phoneNumber!= null and phoneNumber!='' ">
                phone_number= #{phoneNumber},
                </if>
                <if test="email!= null and email!='' ">
                email= #{email},
                </if>
                <if test="isEmailVerified!= null ">
                isEmail_verified= #{isEmailVerified},
                </if>
                <if test="qq!= null and qq!='' ">
                qq= #{qq},
                </if>
                <if test="pinNumber!= null and pinNumber!='' ">
                pin_number= #{pinNumber},
                </if>
                <if test="money!= null ">
                money= #{money},
                </if>
                <if test="consumptionAmount!= null ">
                consumption_amount= #{consumptionAmount},
                </if>
                <if test="createTime!= null ">
                create_time= #{createTime},
                </if>
                <if test="updateTime!= null ">
                update_time= #{updateTime},
                </if>
            </trim>
        </set>
        WHERE  id= #{id}
    </update>

    <!-- 根据map更新 -->
    <update id="updateUserByMap" parameterType="map">
        UPDATE user
        <set>
            <trim suffixOverrides=",">
                <if test="id!= null" >
                id= #{id},
                </if>
                <if test="userName!= null and userName!=''" >
                user_name= #{userName},
                </if>
                <if test="nickName!= null and nickName!=''" >
                nick_name= #{nickName},
                </if>
                <if test="password!= null and password!=''" >
                password= #{password},
                </if>
                <if test="teamId!= null" >
                team_id= #{teamId},
                </if>
                <if test="ip!= null and ip!=''" >
                ip= #{ip},
                </if>
                <if test="loginTime!= null" >
                login_time= #{loginTime},
                </if>
                <if test="signature!= null and signature!=''" >
                signature= #{signature},
                </if>
                <if test="province!= null and province!=''" >
                province= #{province},
                </if>
                <if test="city!= null and city!=''" >
                city= #{city},
                </if>
                <if test="county!= null and county!=''" >
                county= #{county},
                </if>
                <if test="address!= null and address!=''" >
                address= #{address},
                </if>
                <if test="zipCode!= null and zipCode!=''" >
                zip_code= #{zipCode},
                </if>
                <if test="realName!= null and realName!=''" >
                real_name= #{realName},
                </if>
                <if test="phoneNumber!= null and phoneNumber!=''" >
                phone_number= #{phoneNumber},
                </if>
                <if test="email!= null and email!=''" >
                email= #{email},
                </if>
                <if test="isEmailVerified!= null" >
                isEmail_verified= #{isEmailVerified},
                </if>
                <if test="qq!= null and qq!=''" >
                qq= #{qq},
                </if>
                <if test="pinNumber!= null and pinNumber!=''" >
                pin_number= #{pinNumber},
                </if>
                <if test="money!= null" >
                money= #{money},
                </if>
                <if test="consumptionAmount!= null" >
                consumption_amount= #{consumptionAmount},
                </if>
                <if test="createTime!= null" >
                create_time= #{createTime},
                </if>
                <if test="updateTime!= null" >
                update_time= #{updateTime},
                </if>
            </trim>
        </set>
        WHERE  id= #{id}
    </update>

    <!-- 根据主键查询 -->
    <select id="getUserByKey" resultMap="user" parameterType="com.huayu.entity.personal.User">
        SELECT id,user_name,nick_name,password,team_id,ip,login_time,signature,province,city,county,address,zip_code,real_name,phone_number,email,isEmail_verified,qq,pin_number,money,consumption_amount,create_time,update_time FROM user
        WHERE  id= #{id}
    </select>

    <!-- 根据主键批量查询 -->
    <select id="getUsersByKeys" resultMap="user" parameterType="map">
        SELECT id,user_name,nick_name,password,team_id,ip,login_time,signature,province,city,county,address,zip_code,real_name,phone_number,email,isEmail_verified,qq,pin_number,money,consumption_amount,create_time,update_time FROM user
        WHERE
    id in
        <foreach collection="list" separator="," item="id" open="(" close=")">
        #{id}
        </foreach>
    </select>

    <!-- 分页 -->
    <select id="getUserListWithPage" parameterType="map" resultMap="user">
        <include refid="selector" />
        <include refid="Listwhere" />
        <include refid="Listorder" />
        <include refid="ListLimit" />
    </select>

    <!-- 数据集合 -->
    <select id="getUserList" parameterType="map" resultMap="user">
        <include refid="selector" />
        <include refid="Listwhere" />
        <include refid="Listorder" />
    </select>

    <!-- 数据总数 -->
    <select id="getUserListCount" parameterType="map" resultType="int">
        SELECT count(1) FROM user
        <include refid="Listwhere" />
    </select>



</mapper>



